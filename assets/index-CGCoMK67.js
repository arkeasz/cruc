import{j as e,r as a}from"./index-DTPEDtSb.js";function E({title:n,description:r,id:o,onDelete:i}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"task",children:[e.jsxs("div",{className:"info",children:[e.jsxs("h3",{children:[" ",n," "]}),e.jsx("p",{children:r})]}),e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:"button",onClick:()=>i(o),children:"🗑️ Delete"}),e.jsx("button",{className:"button",children:"⇧ Update"})]})]})})}function k({title:n,description:r,setTitle:o,setDescription:i,addTask:d}){return e.jsx(e.Fragment,{children:e.jsxs("form",{children:[e.jsx("input",{type:"text",placeholder:"Title",value:n,onChange:c=>o(c.target.value)}),e.jsx("input",{type:"text",placeholder:"Description",value:r,onChange:c=>i(c.target.value)}),e.jsx("button",{onClick:d,children:"➕ Agregar"})]})})}const u="https://cruc.vercel.app/api/tasks";function w(){const[n,r]=a.useState([]),[o,i]=a.useState(!0),[d,c]=a.useState(null),[h,x]=a.useState(""),[p,j]=a.useState("");a.useEffect(()=>{(async()=>{try{const s=await fetch(u);if(!s.ok)throw new Error(`Response status: ${s.status}`);const l=await s.json();r(l)}catch(s){c(s.message)}finally{i(!1)}})()},[]);const f=async()=>{if(!h||!p)return alert("Title and description are required");try{const t=await fetch(`${u}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:h,description:p})});if(!t.ok)throw new Error("Error to post task");const s=await t.json();r(l=>[...l,s]),x(""),j("")}catch(t){console.log("Error:",t)}},m=async t=>{try{if(!(await fetch(`${u}/${t}`,{method:"DELETE"})).ok)throw new Error("Error al eliminar la tarea");r(l=>l.filter(g=>g._id!==t))}catch(s){console.error("Error:",s)}};return o?e.jsx("p",{children:"Loading..."}):d?e.jsxs("p",{children:["Error: ",d]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"section-tasks",children:[e.jsx(k,{title:h,description:p,setTitle:x,setDescription:j,addTask:f}),e.jsx("div",{className:"tasks",children:n.length===0?e.jsx("p",{children:"No hay tareas disponibles"}):n.map(t=>e.jsx(E,{title:t.title,description:t.description,id:t._id,onDelete:m}))})]})})}export{w as default};
