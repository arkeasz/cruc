import{j as e,r as s}from"./index-iMZvfH4d.js";function y({title:o,description:n,id:c,onDelete:l}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"task",children:[e.jsxs("h3",{children:[" ",o," "]}),e.jsx("p",{children:n}),e.jsx("button",{onClick:()=>l(c),children:"🗑️ Delete"}),e.jsx("button",{children:"⇧ Update"})]})})}const i="https://cruc.vercel.app/api/tasks";function m(){const[o,n]=s.useState([]),[c,l]=s.useState(!0),[p,j]=s.useState(null),[d,u]=s.useState(""),[h,x]=s.useState("");s.useEffect(()=>{(async()=>{try{const r=await fetch(i);if(!r.ok)throw new Error(`Response status: ${r.status}`);const a=await r.json();n(a)}catch(r){j(r.message)}finally{l(!1)}})()},[]),console.log(i);const f=async()=>{if(!d||!h)return alert("Title and description are required");try{const t=await fetch(`${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:d,description:h})});if(!t.ok)throw new Error("Error to post task");const r=await t.json();n(a=>[...a,r]),u(""),x("")}catch(t){console.log("Error:",t)}},g=async t=>{try{if(!(await fetch(`${i}/${t}`,{method:"DELETE"})).ok)throw new Error("Error al eliminar la tarea");n(a=>a.filter(E=>E._id!==t))}catch(r){console.error("Error:",r)}};return c?e.jsx("p",{children:"Loading..."}):p?e.jsxs("p",{children:["Error: ",p]}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Title",value:d,onChange:t=>u(t.target.value)}),e.jsx("input",{type:"text",placeholder:"Description",value:h,onChange:t=>x(t.target.value)}),e.jsx("button",{onClick:f,children:"➕ Agregar"})]}),e.jsx("div",{className:"tasks",children:o.length===0?e.jsx("p",{children:"No hay tareas disponibles"}):o.map(t=>e.jsx(y,{title:t.title,description:t.description,id:t._id,onDelete:g}))})]})})}export{m as default};
